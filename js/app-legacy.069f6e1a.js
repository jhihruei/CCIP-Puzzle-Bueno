(function(e){function t(t){for(var o,i,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)i=s[d],r[i]&&f.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00a2":function(e,t,n){},"034f":function(e,t,n){"use strict";var o=n("64a9"),r=n.n(o);r.a},"089f":function(e,t,n){e.exports=n.p+"img/mopcon.0cfaa3bb.png"},"0b03":function(e,t,n){e.exports=n.p+"img/openSUSE_Taiwan.9440553c.png"},"0dba":function(e,t,n){e.exports=n.p+"img/NCUGC.c2c12c4b.png"},"0e5f":function(e,t,n){e.exports=n.p+"img/nchc.73816ec0.png"},"135b":function(e,t,n){},"16c8":function(e,t,n){},"1df5":function(e,t,n){"use strict";var o=n("6166"),r=n.n(o);r.a},"2c78":function(e,t,n){"use strict";var o=n("a3e7"),r=n.n(o);r.a},"44bf":function(e,t,n){"use strict";var o=n("9aeb"),r=n.n(o);r.a},"490c":function(e,t,n){"use strict";var o=n("135b"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("a4bb"),r=n.n(o),a=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Background"),n("router-view")],1)},s=[],c={name:"App"},u=c,l=(n("034f"),n("490c"),n("2877")),d=Object(l["a"])(u,i,s,!1,null,null,null),f=d.exports,p=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Booth"}},[n("div",{staticClass:"content--wrapper"},[n("div",{staticClass:"subPage"},[n("div",{staticClass:"mobile subpage--title"},[n("div",{staticClass:"title--text"},[e._v(e._s(e.title.zh)+" - 攤位端")])]),n("div",{staticClass:"desktop subpage--title"},[n("div",{staticClass:"title--text"},[n("div",[e._v(e._s(e.title.zh)+" - 攤位端")]),n("div",{staticClass:"divider"}),n("div",[e._v(e._s(e.title.en)+" - Booth")])])])]),n("div",{staticClass:"content"},[n("div",{attrs:{role:"logo"}},[n("img",{attrs:{alt:"",src:e.boothLogo}})]),""!==e.boothToken?n("qrcode-reader",{staticClass:"scanner",attrs:{enable:e.qrState,width:"400px",height:"300px",noResult:!0},on:{OnSuccess:e.OnSuccess}}):e._e(),n("div",{attrs:{role:"messages"}},[n("p",{class:{"red--text":e.alertError,"green--text":e.alertSuccess}},[e._v(e._s(e.alertMessages))])])],1)]),n("Footer")],1)},h=[],m=(n("a481"),n("386d"),n("7f7f"),n("7514"),n("5176")),g=n.n(m),b=n("bc3a"),_=n.n(b),w=n("4328"),y=n.n(w),S=n("70de"),k={baseURL:S.serverUrl};g()(_.a.defaults,k);var C=function(){return _.a.get("/event/puzzle/deliverers").then(function(e){return e.data})},O=function(){return _.a.get(S.sponsorUrl).then(function(e){return e.data.map(function(e){return{logourl:"https://sitcon.org/2019/static/img/sponsor/"+e.image,name:{en:e.name.trim()}}})})},x=function(e){return _.a.get("/event/puzzle/deliverer",{params:{token:e}})},T=function(e,t){return _.a.post("/event/puzzle/deliver?token="+e,y.a.stringify({receiver:t}))},z=function(e){return _.a.get("/event/puzzle",{params:{token:e}})},P=function(e){return _.a.get("landing?token="+e).then(function(e){return e.data})},N=(n("28a5"),n("13e2")),j=n.n(N),E={parseQueryParams:function(e){return e.split("?").pop().split("&").map(function(e){var t=e.split("=");return{key:t.shift(),value:t.pop()}}).reduce(function(e,t){return e[t.key]=t.value,e},{})},sha1Gen:function(e){var t=j()();return t.update(e),t.digest("hex")},StringFormat:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments).slice(1);return t.reduce(function(e,t,n){return e.replace("${"+(n+1)+"}",t)},e)}},M={name:"Booth",data:function(){return{title:S.title,boothName:"Unknow booth",boothToken:"",qrState:!0,buffer:"",alertMessages:"攤位驗證成功，掃描 QR Code 即可發送程式碼拼圖",alertError:!1,alertSuccess:!1,sponsorList:[],communityList:[{name:{en:"openSUSE Taiwan"},logourl:n("0b03")},{name:{en:"SITCONxHK"},logourl:n("8033")},{name:{en:"MozTW 摩茲台灣社群"},logourl:n("d8c5")},{name:{en:"Monospace 社群友善空間"},logourl:n("bcd8")},{name:{en:"中央創遊"},logourl:n("0dba")},{name:{en:"全球学生开源年会"},logourl:n("a6ce")},{name:{en:"MOPCON 行動科技年會"},logourl:n("089f")},{name:{en:"TDOHacker"},logourl:n("9e20")}]}},computed:{boothLogo:function(){var e=this,t=null;return"Unknow booth"!==this.boothName&&void 0!==(t=this.sponsorList.find(function(t){return t.name.en===e.boothName}))?t.logourl:"Unknow booth"!==this.boothName&&void 0!==(t=this.communityList.find(function(t){return t.name.en===e.boothName}))?t.logourl:""}},methods:{OnSuccess:function(e){var t=this;this.buffer!==e&&(this.buffer=e,T(this.boothToken,e).then(function(t){return P(e)}).then(function(e){t.alertMessages="成功幫 "+e.nickname+"蓋章囉 (・ω・)ノ",t.alertSuccess=!0,t.alertError=!1}).catch(function(e){if(e.response)switch(e.response.data.message){case"Already take from this deliverer":t.alertMessages="已經蓋過章囉(￣▽￣)";break;case"invalid receiver token":t.alertMessages="條碼好像不正確(⊙ω⊙)";break;case"token and receiver required":t.alertMessages="好像抓不到條碼(;´༎ຶД༎ຶ`)"}else t.alertMessages="網路可能有問題了_(´ཀ`」 ∠)_";t.alertError=!0,t.alertSuccess=!1}))},loadSponsor:function(){var e=this;O().then(function(t){e.sponsorList=t})}},mounted:function(){var e=this,t={};this.loadSponsor(),window.location.search.length>0&&(t=E.parseQueryParams(window.location.search))?x(t.token).then(function(n){e.boothToken=t.token,e.boothName=n.data.display_name}).catch(function(t){console.log(t),setTimeout(function(){e.$router.replace("/")},1e4)}):e.$router.replace("/")}},L=M,U=(n("2c78"),Object(l["a"])(L,v,h,!1,null,null,null)),R=U.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"PuzzleList"}},[n("div",{staticClass:"content--wrapper"},[n("div",{staticClass:"subPage",class:{hidden:e.hidden}},[n("div",{staticClass:"subpage--title"},[n("div",{staticClass:"title--text"},[e._v(e._s(e.title.zh))])]),n("div",{staticClass:"desktop subpage--title"},[n("div",{staticClass:"title--text"},[n("div",[e._v(e._s(e.title.zh))]),n("div",{staticClass:"divider"}),n("div",[e._v(e._s(e.title.en))])])])]),n("div",{staticClass:"content"},[n("p",[e._v("\n        今年前來 SITCON 的社群與贊助商盛況空前！在各攤位出示你的 QR Code，集章湊齊指定數量的連線，就有機會把限量紀念品帶回家。ヽ(✿ﾟ▽ﾟ)ノ\n      ")]),e._m(0),e._m(1),e.showScanner?[n("qrcode-reader",{attrs:{enable:e.showScanner,noResult:!0,title:"",subTitle:"掃描 QR Code 檢視集章冊"},on:{OnSuccess:e.OnSuccess}})]:[n("div",{staticClass:"table"},[n("table",e._l(e.range,function(t){return n("tr",{key:"r"+t},e._l(e.range,function(o){return n("td",{key:"d"+o,class:{active:!e.table[5*t+o].element||e.table[5*t+o].element.active},style:{backgroundImage:"url("+(e.table[5*t+o].element?e.table[5*t+o].element.logourl:"")+")"},attrs:{"data-text":e.table[5*t+o].element&&""===e.table[5*t+o].element.logourl?e.table[5*t+o].element.name.en:""}})}),0)}),0)])]],2)]),n("Footer")],1)},B=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n        兌換規則："),n("br"),n("ol",[n("li",[e._v("集滿三條直線：能在紀念品攤位折價 20 元")]),n("li",[e._v("集滿五條直線：兌換年會刺繡布章一只")]),n("li",[e._v("集滿七條直線：兌換小石金屬鑰匙圈一只")]),n("li",[e._v("湊齊十條直線：兌換 SITCON 大禮包一袋，內含鑰匙圈與布章")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n        p.s. 請鼓起勇氣和有空的工作人員聊天認識一下，就能收集到 SITCON 那格的章！"),n("br"),e._v("\n        每張 QR Code 只能擇一兌換一次，請在達成條件之後，至 4F 文創組紀念品攤位處領取獎品。\n      ")])}],I=n("75fc"),F=[4539716,21300560,17967249,4762148];function A(e){var t=j()();return t.update(e),t.digest("hex")}function D(e,t){var n=e.charCodeAt(t);return n>96?n-87:n-48}function q(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function Q(e,t,n){for(var o=A(n),r=Object(I["a"])(e),a=0;a<16;a++)q(r,D(o,a),15);for(var i=Object(I["a"])(t),s=0;s<8;s++)q(i,D(o,16+s)%8,7);for(var c=new Array(25),u=F[D(o,24)%4],l=0;l<25;l++)u>>l&1&&(c[l]={type:"community",element:i.shift()});c[12]={type:"free_space"};for(var d=0;d<25;d++)c[d]||(c[d]={type:"sponsor",element:r.shift()});return c}var H={name:"PuzzleList",data:function(){return{data:null,hidden:!1,token:"",title:S.title,booth:[],sponsorList:[],communityList:[{name:{en:"openSUSE Taiwan"},logourl:n("0b03")},{name:{en:"SITCONxHK"},logourl:n("8033")},{name:{en:"MozTW 摩茲台灣社群"},logourl:n("d8c5")},{name:{en:"Monospace 社群友善空間"},logourl:n("bcd8")},{name:{en:"中央創遊"},logourl:n("0dba")},{name:{en:"全球学生开源年会"},logourl:n("a6ce")},{name:{en:"MOPCON 行動科技年會"},logourl:n("089f")},{name:{en:"TDOHacker"},logourl:n("9e20")}],range:[0,1,2,3,4]}},computed:{showScanner:function(){return""===this.token&&null===this.data},sponsors:function(){var e=this;return this.booth.filter(function(t){return void 0===e.communityList.find(function(e){return e.name.en===t})}).map(function(t){var n=e.sponsorList.find(function(e){return e.name.en===t});return n||{name:{en:t},logourl:""}}).map(function(t){return t.active=!(!e.data||!e.data.deliverer)&&e.data.deliverer.indexOf(t.name.en)>=0,t}).map(function(e){return"國網中心"===e.name.en&&(e.logourl=n("0e5f"),e.active=!0),e})},communities:function(){var e=this;return this.communityList.filter(function(t){return e.booth.indexOf(t.name.en)>=0}).map(function(t){return t.active=!(!e.data||!e.data.deliverer)&&e.data.deliverer.indexOf(t.name.en)>=0,t})},table:function(){return Q(this.sponsors,this.communities,this.token)}},methods:{OnSuccess:function(e){e!==this.token&&(window.location.search="token="+E.sha1Gen(e))},loadPuzzle:function(){var e=this;z(this.token).then(function(t){e.data=t.data}).catch(function(e){console.log(e),setTimeout(function(){window.location.search=""},3e3)})},loadDeliverers:function(){var e=this;C().then(function(t){e.booth=t})},loadSponsor:function(){var e=this;O().then(function(t){e.sponsorList=t})}},beforeMount:function(){var e={};window.location.search.length>0&&(e=E.parseQueryParams(window.location.search))&&(this.token=e.token,this.hidden="app"===e.mode,this.loadPuzzle()),this.loadSponsor(),this.loadDeliverers()}},G=H,K=(n("5851"),Object(l["a"])(G,$,B,!1,null,"0f84de02",null)),W=K.exports;a["a"].use(p["a"]);var J=new p["a"]({routes:[{path:"/",component:W},{path:"/booth",component:R}]}),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"QrcodeReader"}},[n("center",[""!=e.title?n("h2",{staticClass:"ma-0"},[e._v(e._s(e.title))]):e._e(),e.webrtc?n("div",{attrs:{id:"camsource"}}):n("div",{attrs:{id:"uploadField"}},[n("label",{attrs:{id:"uploadButton",for:"upload"}}),n("input",{attrs:{type:"file",id:"upload"},on:{change:e.uploadChange}})]),""!==e.subTitle?n("p",{attrs:{role:"subTitle"}},[e._v(e._s(e.subTitle))]):e._e(),e.noResult?e._e():n("h6",{staticClass:"ma-0"},[e._v(e._s(e.result))])])],1)},X=[],Y=(n("4917"),{name:"QrcodeReader",props:{title:{type:String,default:""},subTitle:{type:String,default:""},enable:Boolean,noResult:Boolean,width:{type:String,default:"320px"},height:{type:String,default:"240px"}},data:function(){return{result:"Loading...",cam:null,webrtc:!0,scanner:null}},watch:{enable:function(e){var t=this;t.scanner.setStopped(!e)}},mounted:function(){var e=this;window.w69b.qr.decoding.setWorkerUrl("".concat("/","barcode.js/w69b.qrcode.decodeworker.min.js")),navigator.mediaDevices&&!window.navigator.userAgent.match(/iPhone|iPad|iPod/i)?(e.webrtc=!0,e.scanner=new window.w69b.qr.ui.ContinuousScanner,e.scanner.setDecodedCallback(function(t){e.onSuccess(t)}),e.scanner.render(document.getElementById("camsource"))):(e.webrtc=!1,console.log("Sorry, native web camera streaming (getUserMedia) is not supported by this browser..."))},beforeDestroy:function(){if(navigator.mediaDevices){var e=this;e.scanner.setStopped(!0),e.scanner.dispose()}},methods:{onSuccess:function(e){this.result=e,this.$emit("OnSuccess",e)},uploadChange:function(){var e=this,t=document.getElementById("upload").files[0],n=/^image\//;n.test(t.type)||console.log("File type not valid");var o=new FileReader;o.addEventListener("load",function(){var t=new Image;t.onload=function(n){var o=new window.w69b.qr.decoding.Decoder;o.decode(t).then(function(t){e.onSuccess(t.text)},function(){e.$emit("OnError","no qr code found")})},t.src=this.result}.bind(o),!1),o.readAsDataURL(t)}}}),Z=Y,ee=(n("1df5"),Object(l["a"])(Z,V,X,!1,null,null,null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{active:e.isActive},attrs:{role:"chip"}},[n("img",{attrs:{src:e.logourl}}),n("div",{attrs:{role:"seal"}})])},oe=[],re={name:"Chip",props:{displayName:{type:String,default:""},logoUri:{type:String,default:""},isActive:{type:Boolean,default:!1}},computed:{logourl:function(){return this.logoUri}}},ae=re,ie=(n("44bf"),Object(l["a"])(ae,ne,oe,!1,null,null,null)),se=ie.exports,ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Footer"}},[n("div",{staticClass:"content"},[e._v("\n    "+e._s(e.confName)+" | Fork on\n    "),n("a",{attrs:{href:"https://github.com/CCIP-App/CCIP-Puzzle-Bueno/",target:"_blank",alt:"Source code on GitHub"}},[e._v("GitHub")])])])},ue=[],le={name:"Footer",data:function(){return{confName:S.confName,chip:!0}}},de=le,fe=(n("ee86"),Object(l["a"])(de,ce,ue,!1,null,null,null)),pe=fe.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"background"}})},he=[],me={name:"Background",mounted:function(){}},ge=me,be=(n("cf63"),Object(l["a"])(ge,ve,he,!1,null,"1355de4c",null)),_e=be.exports,we={QrcodeReader:te,Chip:se,Footer:pe,Background:_e};a["a"].config.productionTip=!1,r()(we).forEach(function(e){a["a"].component(e,we[e])}),new a["a"]({router:J,render:function(e){return e(f)}}).$mount("#app")},5851:function(e,t,n){"use strict";var o=n("00a2"),r=n.n(o);r.a},6166:function(e,t,n){},"64a9":function(e,t,n){},"70de":function(e){e.exports={serverUrl:"https://ccip.opass.app/",sponsorUrl:"https://sitcon.org/2019/static/json/sponsor.json",title:{zh:"真．實境矩陣",en:"Booth Reward Activity"},confName:"SITCON 2019"}},8033:function(e,t,n){e.exports=n.p+"img/SITCONxHK.9c7e1106.png"},"9aeb":function(e,t,n){},"9e20":function(e,t,n){e.exports=n.p+"img/TDOH.d8a25be3.png"},a1a8:function(e,t,n){},a3e7:function(e,t,n){},a6ce:function(e,t,n){e.exports=n.p+"img/SOSCONF.bbb0d75d.png"},bcd8:function(e,t,n){e.exports=n.p+"img/monospace.201a6fa7.png"},cf63:function(e,t,n){"use strict";var o=n("a1a8"),r=n.n(o);r.a},d8c5:function(e,t,n){e.exports=n.p+"img/Moztwlogo.1dabe9cf.png"},ee86:function(e,t,n){"use strict";var o=n("16c8"),r=n.n(o);r.a}});
//# sourceMappingURL=app-legacy.069f6e1a.js.map